<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="keywords" content="CentOS,Ubuntu,Fedora,Debian,Linux,KVM,Virtualization">
<meta name="description" content="The site for people who want to establish the Network Server with CentOS, Ubuntu, Fedora, Debian">
<title>Debian 7.0 Wheezy - Configure iSCSI Target : Server World</title>
<link href="css\base.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\navi.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\main.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\position.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\print.css" media="print" rel="stylesheet" type="text/css">
<script type="text/javascript" src="command\popup.js"></script>
<script type="text/javascript">
hs.graphicsDir = './command/graphics/';
hs.outlineType = 'rounded-white';
hs.wrapperClassName = 'draggable-header';
</script>
</head>
<body>
<div id="top-menu">
<table id="menu-table" summary="menu">
<tr>
<td class="menu" style="width: 13%;"><a href="..\index.htm">Server World</a></td>
<td class="menu">
<div class="top_navi">
<ul>
<li><a href="note.html">Other OS Configs</a>
<ul>
<li><a href="note (1).html">CentOS 7</a></li>
<li><a href="note (2).html">CentOS 6</a></li>
<li><a href="note (3).html">Fedora 27</a></li>
<li><a href="note (4).html">Fedora 26</a></li>
<li><a href="note (5).html">Debian 9</a></li>
<li><a href="note (6).html">Debian 8</a></li>
<li><a href="note (7).html">Ubuntu 17.04</a></li>
<li><a href="note (8).html">Ubuntu 16.04 LTS</a></li>
<li><a href="note (9).html">SUSE Linux Enterprise 12</a></li>
<li><a href="note (10).html">SUSE Linux Enterprise 11</a></li>
<li><a href="note (11).html">Windows Server 2016</a></li>
<li><a href="note (12).html">Windows Server 2012 R2</a></li>
<li><a href="note (13).html">Other Tips</a></li>
</ul>
<ul style="position: absolute; margin-left: 18em; z-index: 90;">
<li><a href="note (14).html">CentOS 5</a></li>
<li><a href="note (15).html">Fedora 25</a></li>
<li><a href="note (16).html">Fedora 24</a></li>
<li><a href="note (17).html">Fedora 23</a></li>
<li><a href="note (18).html">Fedora 22</a></li>
<li><a href="note (19).html">Fedora 21</a></li>
<li><a href="note (20).html">Fedora 20</a></li>
<li><a href="note (21).html">Fedora 19</a></li>
<li><a href="note (22).html">Fedora 18</a></li>
<li><a href="note (23).html">Fedora 17</a></li>
<li><a href="note (24).html">Fedora 16</a></li>
<li><a href="note (25).html">Fedora 15</a></li>
<li><a href="note (26).html" style="border-bottom: #aaaaaa 0px solid;">Fedora 14</a></li>
</ul>
<ul style="position: absolute; margin-left: 36em; z-index: 80;">
<li><a href="note (27).html">Debian 7</a></li>
<li><a href="note (28).html">Debian 6</a></li>
<li><a href="note (29).html">Ubuntu 15.04</a></li>
<li><a href="note (30).html">Ubuntu 14.04 LTS</a></li>
<li><a href="note (31).html">Ubuntu 13.04</a></li>
<li><a href="note (32).html">Ubuntu 12.04 LTS</a></li>
<li><a href="note (33).html">Ubuntu 11.04</a></li>
<li><a href="note (34).html">Ubuntu 10.04 LTS</a></li>
<li><a href="note (35).html">Fedora 13</a></li>
<li><a href="note (36).html">Fedora 12</a></li>
<li><a href="note (37).html">Fedora 11</a></li>
<li><a href="note (38).html">Fedora 10</a></li>
<li><a href="note (39).html" style="border-bottom: #aaaaaa 0px solid;">Scientific Linux 6</a></li>
</ul>
</li>
</ul>
</div>
</td>
<td class="menu"><a href="note (40).html">Introductions</a></td>
<td class="menu"><a href="note (41).html">Histories</a></td>
<td class="menu"><a href="note (42).html">Commands Help</a></td>
<td class="menu"><a href="note (43).html">Links/Contact</a></td>
<td class="menu" style="width: 13%;">
<div class="count">8470 / 62643206</div>
</td>
</tr>
</table>
</div>
<div id="left">
<div class="os">Debian 7.0</div>
<div class="navi">
<ul>
<li><a href="note (27).html">Get Debian 7.0</a></li>
<li><a href="note (4050).html">Install Debian</a></li>
<li class="tree"><a href="note (4051).html">Initial Settings</a>
<ul>
<li><a href="note (4052).html">(1) Set Admin User</a></li>
<li><a href="note (4053).html">(2) Set Command Alias</a></li>
<li><a href="note (4054).html">(3) Networking</a></li>
<li><a href="note (4055).html">(4) Services</a></li>
<li><a href="note (4056).html">(5) Update System</a></li>
<li><a href="note (4057).html">(6) Configure vim</a></li>
<li style="border-bottom: 0px"><a href="note (4058).html">(7) Configure sudo</a></li>
</ul>
</li>
<li><a href="note (4059).html">NTP Server</a></li>
<li class="tree"><a href="note (4060).html">SSH Server</a>
<ul>
<li><a href="note (4061).html">(1) Password Authentication</a></li>
<li><a href="note (4062).html">(2) Keys Authentication</a></li>
<li style="border-bottom: 0px"><a href="note (4063).html">(3) SFTP</a></li>
</ul>
</li>
<li class="tree"><a href="note (4064).html">DNS Server</a>
<ul>
<li><a href="note (4065).html">(1) Install BIND</a></li>
<li><a href="note (4066).html">(2) Set Zones</a></li>
<li><a href="note (4067).html">(3) Check working</a></li>
<li><a href="note (4068).html">(4) Set CNAME</a></li>
<li style="border-bottom: 0px"><a href="note (4069).html">(5) Config as a Slave Server</a></li>
</ul>
</li>
<li><a href="note (4070).html">DHCP Server</a></li>
<li class="tree"><a href="note (4071).html">Virtualization</a>
<ul>
<li><a href="note (4072).html">(1) Install KVM</a></li>
<li><a href="note (4073).html">(2) Create Virtual Macine #1</a></li>
<li><a href="note (4074).html">(3) Create Virtual Macine #2</a></li>
<li><a href="note (4075).html">(4) Operation</a></li>
<li><a href="note (4076).html">(5) SPICE Server</a></li>
<li style="border-bottom: 0px"><a href="note (4077).html">(6) SPICE Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (4078).html">Storage Server</a>
<ul>
<li><a href="note (4079).html">(1) Configure iSCSI Target</a></li>
<li style="border-bottom: 0px"><a href="note (4080).html">(2) Configure iSCSI Initiator</a></li>
</ul>
</li>
<li class="tree"><a href="note (4081).html">NFS Server</a>
<ul>
<li><a href="note (4082).html">(1) Configure NFS Server</a></li>
<li style="border-bottom: 0px"><a href="note (4083).html">(2) Configure NFS Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (4084).html">NIS Server</a>
<ul>
<li><a href="note (4085).html">(1) Configure NIS Server</a></li>
<li style="border-bottom: 0px"><a href="note (4086).html">(2) Configure NIS Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (4087).html">LDAP Server</a>
<ul>
<li><a href="note (4088).html">(1) Configure LDAP Server</a></li>
<li style="border-bottom: 0px"><a href="note (4089).html">(2) Configure LDAP Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (4090).html">WEB Server</a>
<ul style="position: absolute; margin-top: -9.2em;">
<li><a href="note (4091).html">( 1 ) Install Apache2</a></li>
<li><a href="note (4092).html">( 2 ) Use Perl Script</a></li>
<li><a href="note (4093).html">( 3 ) Use PHP Script</a></li>
<li><a href="note (4094).html">( 4 ) Use Ruby Script</a></li>
<li><a href="note (4095).html">( 5 ) Enable Userdir</a></li>
<li><a href="note (4096).html">( 6 ) Virtual Hostings</a></li>
<li><a href="note (4097).html">( 7 ) Configure SSL</a></li>
<li><a href="note (4098).html">( 8 ) Configure WebDAV</a></li>
<li><a href="note (4099).html">( 9 ) Enable suEXEC</a></li>
<li><a href="note (4100).html">(10) Basic Auth + PAM</a></li>
<li><a href="note (4101).html">(11) Basic Auth + LDAP</a></li>
<li><a href="note (4102).html">(12) Log Analyzer - Visitors</a></li>
<li><a href="note (4103).html">(13) Log Analyzer - AWstats</a></li>
<li><a href="note (4104).html">(14) WebMail - SquirrelMail</a></li>
<li style="border-bottom: 0px"><a href="note (4105).html">(15) WebMail - RoundCube</a></li>
</ul>
</li>
<li class="tree"><a href="note (4106).html">Database</a>
<ul>
<li><a href="note (4107).html">(1) Install MySQL</a></li>
<li style="border-bottom: 0px"><a href="note (4108).html">(2) Operate from Web Browser</a></li>
</ul>
</li>
<li class="tree"><a href="note (4109).html">FTP Server</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li><a href="note (4110).html">(1) Install Vsftpd</a></li>
<li><a href="note (4111).html">(2) Install ProFTPD</a></li>
<li><a href="note (4112).html">(3) Install Pure-FTPd</a></li>
<li><a href="note (4113).html">(4) FTP Client - WinSCP</a></li>
<li><a href="note (4114).html">(5) Vsftpd over TLS/SSL</a></li>
<li><a href="note (4115).html">(6) ProFTPD over TLS/SSL</a></li>
<li style="border-bottom: 0px"><a href="note (4116).html">(7) Pure-FTPd over TLS/SSL</a></li>
</ul>
</li>
<li class="tree"><a href="note (4117).html">MAIL Server</a>
<ul style="position: absolute; margin-top: -7.4em;">
<li><a href="note (4118).html">(1) Install/Configure Postfix</a></li>
<li><a href="note (4119).html">(2) Install/Configure Dovecot</a></li>
<li><a href="note (4120).html">(3) Configure Client</a></li>
<li><a href="note (4121).html">(4) Configure SSL</a></li>
<li><a href="note (4122).html">(5) Virtual Domains</a></li>
<li><a href="note (4123).html">(6) Run with Clamav - ClamSMTP</a></li>
<li><a href="note (4124).html">(7) Log Analyzer - pflogsumm</a></li>
<li><a href="note (4125).html">(8) Log Analyzer - MailGraph</a></li>
<li style="border-bottom: 0px"><a href="note (4126).html">(9) Log Analyzer - AWstats</a></li>
</ul>
</li>
<li class="tree"><a href="note (4127).html">Samba Server</a>
<ul>
<li><a href="note (4128).html">(1) Create Fully Accessed Directory</a></li>
<li><a href="note (4129).html">(2) Create Limited Directory</a></li>
<li style="border-bottom: 0px"><a href="note (4130).html">(3) Install SWAT</a></li>
</ul>
</li>
<li class="tree"><a href="note (4131).html">Proxy Server</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li><a href="note (4132).html">(1) Install Squid</a></li>
<li><a href="note (4133).html">(2) Run with Clamav - SquidClamav</a></li>
<li><a href="note (4134).html">(3) Run with SquidGuard</a></li>
<li style="border-bottom: 0px"><a href="note (4135).html">(4) Configure as a Reverse Proxy</a></li>
</ul>
</li>
<li class="tree"><a href="note (4136).html">Desktop Env</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li><a href="note (4137).html">(1) GNOME Desktop Environment</a></li>
<li><a href="note (4138).html">(2) KDE Desktop Environment</a></li>
<li><a href="note (4139).html">(3) Cinnamon Desktop Environment</a></li>
<li><a href="note (4140).html">(4) MATE Desktop Environment</a></li>
<li style="border-bottom: 0px"><a href="note (4141).html">(5) Install VNC Server</a></li>
</ul>
</li>
<li id="other"><a href="note (4142).html">Others</a>
<ul style="position: absolute; margin-top: -20.1em;">
<li><a href="note (4143).html">Set Disk Quota</a></li>
<li><a href="note (4144).html">Add Hard Drive</a></li>
<li><a href="note (4145).html">Set Password Rules</a></li>
<li><a href="note (4146).html">Set System Timezone</a></li>
<li><a href="note (4147).html">Set KeyboardMap</a></li>
<li><a href="note (4148).html">Set Hostname</a></li>
<li><a href="note (4149).html">Create SSL Certificates</a></li>
<li><a href="note (4150).html">ACL <span style="display:inline;position:absolute;left:110px;">- &nbsp; Access Controls</span></a></li>
<li><a href="note (4151).html">TCP Wrapper <span style="display:inline;position:absolute;left:110px;">- &nbsp; Access Controls</span></a></li>
<li><a href="note (4152).html">Lsync <span style="display:inline;position:absolute;left:110px;">- &nbsp; Sync Files</span></a></li>
<li><a href="note (4153).html">Rsync <span style="display:inline;position:absolute;left:110px;">- &nbsp; Sync Files</span></a></li>
<li><a href="note (4154).html">ChkrootKit <span style="display:inline;position:absolute;left:110px;">- &nbsp; Detect RootKit</span></a></li>
<li style="border-bottom: 0px"><a href="note (4142).html">Clamav <span style="display:inline;position:absolute;left:110px;">- Anti-Virus</span></a></li>
</ul>
</li>
</ul>
</div>
<div style="display: inline-block; width: 100%; font-size: 12px; text-align: center; background-color: #dcdcdc; border-bottom: 1px solid #696969; border-top: 2px solid #dcdcdc;">Sponsored Link</div>
<div id="bann">
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "6315121180";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
<div id="contents">
<br>
<table style="width: 96%; line-height: 1.5; margin-top: 5px; margin-bottom: 10px; margin-left: auto; margin-right: auto;" summary="subject">
<tr>
<td style="width: 100%; height: 28px; color: #ff3399; padding-left: 50px; background: url(./img/icon.gif) #ffffff no-repeat 0 0;">
<div class="subject">Configure iSCSI Target<div class="date">2013/05/07</div></div>
</td>
</tr>
</table>
<table class="base" summary="1">
<tr>
<td class="num">&nbsp;</td>
<td>
<div class="block">
Configure Storage Server with iSCSI. A storage on a network is called iSCSI Target, 
a Client which connects to iSCSI Target is called iSCSI Initiator. 
</div>
<div class="block">
This example is based on the environment below.<br>
&nbsp;<div class="posl-1">nas01.srv.world </div><div class="posl-1">[10.0.0.50] - iSCSI Target</div><br>
&nbsp;<div class="posl-1">client.srv.world </div><div class="posl-1">[10.0.0.60] - iSCSI Initiator</div>
</div>
<div class="block">
This example configures to create LVM partition on iSCSI Target, so it need to have enough areas to use. 
If your iSCSI Target does not have enough areas, add new hard drive. 
</div>
</td>
</tr>
<tr>
<td class="num">[1]</td>
<td>Configure iSCSI Target 
</td>
</tr>
</table>
<table class="term" summary="1-1">
<tr>
<td>
<div class="color2"># create a phisical volume</div><br>
root@nas01:~# <div class="color1">pvcreate /dev/sdb1 </div><br>
<div class="block">&nbsp; Physical volume "/dev/sdb1" successfully created</div>
<div class="color2"># create a volume group named "vg_target00"</div><br>
root@nas01:~# <div class="color1">vgcreate -s 32M vg_target00 /dev/sdb1 </div><br>
<div class="block">&nbsp; Volume group "vg_target00" successfully created</div>
<div class="color2"># create a logical volume named "lv_target00"</div><br>
root@nas01:~# <div class="color1">lvcreate -L 100G -n lv_target00 vg_target00 </div><br>
<div class="block">&nbsp; Logical volume "lv_target00" created</div>
<div class="block">
root@nas01:~# <div class="color1"><a href="command\html\aptitude.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">aptitude</a> -y install iscsitarget iscsitarget-dkms </div></div>
<div class="block">
root@nas01:~# <div class="color1"><a href="command\html\vi.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">vi</a> /etc/default/iscsitarget </div></div>
<div class="block">
<div class="color2"># change</div><br>
ISCSITARGET_ENABLE=<div class="color1">true</div>
</div>
<div class="block">
root@nas01:~# <div class="color1"><a href="command\html\vi.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">vi</a> /etc/iet/ietd.conf </div></div>
<div class="color1">
<div class="color2"># add at the last</div><br>
<div class="color2"># naming rule : [ iqn.yaer-month.domain:any name ]</div><br>
Target iqn.2013-05.world.srv:target00<br>
&nbsp; &nbsp; <div class="color2"># provided devicce as a iSCSI target</div><br>
&nbsp; &nbsp; Lun 0 Path=/dev/vg_target00/lv_target00,Type=blockio<br>
&nbsp; &nbsp; <div class="color2"># iSCSI Initiator's IP address you allow to connect</div><br>
&nbsp; &nbsp; initiator-address 10.0.0.60<br>
&nbsp; &nbsp; <div class="color2"># authentication info ( set anyone you like for "username", "password" )</div><br>
<div class="block">
&nbsp; &nbsp; incominguser username password
</div></div>
root@nas01:~# <div class="color1">/etc/init.d/iscsitarget restart </div><br>
Removing iSCSI enterprise target devices: :.<br>
Starting iSCSI enterprise target service:.<br>
root@nas01:~# <div class="color1">ietadm --op show --tid=1 </div><div class="posl-1"><div class="color2"># show status</div></div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
Wthreads=8
Type=0
QueuedCommands=32
NOPInterval=0
NOPTimeout=0
</pre>
</td>
</tr>
</table>
<table class="base" summary="2">
<tr>
<td class="num">[2]</td>
<td>
<div class="block">
Complete to configure iSCSI Target. 
<a href="note (4080).html">See next step to configure iSCSI Initiator</a>. 
</div><br>
</td>
</tr>
</table>
<div style="width: 100%; border-top: 1px #696969 solid; padding-top: 20px; padding-bottom: 20px;">
<div style="width: 728px; height: 90px; margin-left: auto; margin-right: auto;">
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "3679227322";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div id="right">
<div class="os">iSCSI</div>
<div class="navi2">
<ul>
<li><a href="note (4079).html">iSCSI Target</a></li>
<li><a href="note (4080).html">iSCSI Initiator</a></li>
</ul>
</div>
<div style="width: 160px; text-align: center;">
<div style="display: inline-block; width: 100%; font-size: 12px; text-align: center; background-color: #dcdcdc; border-bottom: 1px solid #696969; border-top: 2px solid #dcdcdc;">Sponsored Link</div>
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "6315121180";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
<div id="footer">Copyright &copy; 2007-2018 Server World All Rights Reserved.
<script type="text/javascript" src="bin\count.js"></script>
<img src="../bin/count/count.cgi?1" width="1" height="1" alt="">
</div>
<div id="fb-root">&nbsp;</div>
<script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="toolbar0">
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plusone size="Medium"></g:plusone>
</div>
<div id="toolbar1">
<fb:like href="note (4155).html" send="true" layout="button_count" width="450" show_faces="true"></fb:like>
</div>
<div id="toolbar2">
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11962766-1");
pageTracker._trackPageview();
} catch(err) {}
</script>
</body>
</html>
