<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="keywords" content="CentOS,Ubuntu,Fedora,Debian,Linux,KVM,Virtualization">
<meta name="description" content="The site for people who want to establish the Network Server with CentOS, Ubuntu, Fedora, Debian">
<title>Fedora 20 - FreeIPA - Configure IPA Server : Server World</title>
<link href="css\base.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\navi.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\main.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\position.css" media="screen" rel="stylesheet" type="text/css">
<link href="css\print.css" media="print" rel="stylesheet" type="text/css">
<script type="text/javascript" src="command\popup.js"></script>
<script type="text/javascript">
hs.graphicsDir = './command/graphics/';
hs.outlineType = 'rounded-white';
hs.wrapperClassName = 'draggable-header';
</script>
</head>
<body>
<div id="top-menu">
<table id="menu-table" summary="menu">
<tr>
<td class="menu" style="width: 13%;"><a href="..\index.htm">Server World</a></td>
<td class="menu">
<div class="top_navi">
<ul>
<li><a href="note.html">Other OS Configs</a>
<ul>
<li><a href="note (1).html">CentOS 7</a></li>
<li><a href="note (2).html">CentOS 6</a></li>
<li><a href="note (3).html">Fedora 27</a></li>
<li><a href="note (4).html">Fedora 26</a></li>
<li><a href="note (5).html">Debian 9</a></li>
<li><a href="note (6).html">Debian 8</a></li>
<li><a href="note (7).html">Ubuntu 17.04</a></li>
<li><a href="note (8).html">Ubuntu 16.04 LTS</a></li>
<li><a href="note (9).html">SUSE Linux Enterprise 12</a></li>
<li><a href="note (10).html">SUSE Linux Enterprise 11</a></li>
<li><a href="note (11).html">Windows Server 2016</a></li>
<li><a href="note (12).html">Windows Server 2012 R2</a></li>
<li><a href="note (13).html">Other Tips</a></li>
</ul>
<ul style="position: absolute; margin-left: 18em; z-index: 90;">
<li><a href="note (14).html">CentOS 5</a></li>
<li><a href="note (15).html">Fedora 25</a></li>
<li><a href="note (16).html">Fedora 24</a></li>
<li><a href="note (17).html">Fedora 23</a></li>
<li><a href="note (18).html">Fedora 22</a></li>
<li><a href="note (19).html">Fedora 21</a></li>
<li><a href="note (20).html">Fedora 20</a></li>
<li><a href="note (21).html">Fedora 19</a></li>
<li><a href="note (22).html">Fedora 18</a></li>
<li><a href="note (23).html">Fedora 17</a></li>
<li><a href="note (24).html">Fedora 16</a></li>
<li><a href="note (25).html">Fedora 15</a></li>
<li><a href="note (26).html" style="border-bottom: #aaaaaa 0px solid;">Fedora 14</a></li>
</ul>
<ul style="position: absolute; margin-left: 36em; z-index: 80;">
<li><a href="note (27).html">Debian 7</a></li>
<li><a href="note (28).html">Debian 6</a></li>
<li><a href="note (29).html">Ubuntu 15.04</a></li>
<li><a href="note (30).html">Ubuntu 14.04 LTS</a></li>
<li><a href="note (31).html">Ubuntu 13.04</a></li>
<li><a href="note (32).html">Ubuntu 12.04 LTS</a></li>
<li><a href="note (33).html">Ubuntu 11.04</a></li>
<li><a href="note (34).html">Ubuntu 10.04 LTS</a></li>
<li><a href="note (35).html">Fedora 13</a></li>
<li><a href="note (36).html">Fedora 12</a></li>
<li><a href="note (37).html">Fedora 11</a></li>
<li><a href="note (38).html">Fedora 10</a></li>
<li><a href="note (39).html" style="border-bottom: #aaaaaa 0px solid;">Scientific Linux 6</a></li>
</ul>
</li>
</ul>
</div>
</td>
<td class="menu"><a href="note (40).html">Introductions</a></td>
<td class="menu"><a href="note (41).html">Histories</a></td>
<td class="menu"><a href="note (42).html">Commands Help</a></td>
<td class="menu"><a href="note (43).html">Links/Contact</a></td>
<td class="menu" style="width: 13%;">
<div class="count">8343 / 62643079</div>
</td>
</tr>
</table>
</div>
<div id="left">
<div class="os">Fedora 20</div>
<div class="navi">
<ul>
<li><a href="note (20).html">Get Fedora 20</a></li>
<li><a href="note (3360).html">Install Fedora 20</a></li>
<li class="tree"><a href="note (3361).html">Initial Config</a>
<ul>
<li><a href="note (3362).html">(1) Create a User</a></li>
<li><a href="note (3363).html">(2) FW &amp; SELinux</a></li>
<li><a href="note (3364).html">(3) Networking</a></li>
<li><a href="note (3365).html">(4) Services</a></li>
<li><a href="note (3366).html">(5) Update System</a></li>
<li><a href="note (3367).html">(6) Configure vim</a></li>
<li style="border-bottom: 0px"><a href="note (3368).html">(7) Configure sudo</a></li>
</ul>
</li>
<li><a href="note (3369).html">NTP Server</a></li>
<li class="tree"><a href="note (3370).html">SSH Server</a>
<ul>
<li><a href="note (3371).html">(1) Password Authentication</a></li>
<li><a href="note (3372).html">(2) Keys Authentication</a></li>
<li><a href="note (3373).html">(3) Transfer files with SFTP</a></li>
<li style="border-bottom: 0px"><a href="note (3373).html">(3) Transfer files with SFTP</a></li>
</ul>
</li>
<li class="tree"><a href="note (3374).html">DNS Server</a>
<ul>
<li><a href="note (3375).html">(1) Install BIND</a></li>
<li><a href="note (3376).html">(2) Configure Zones</a></li>
<li><a href="note (3377).html">(3) Start BIND</a></li>
<li><a href="note (3378).html">(4) chroot Environment</a></li>
<li><a href="note (3379).html">(5) Set CNAME</a></li>
<li style="border-bottom: 0px"><a href="note (3380).html">(6) Configure as a Slave Server</a></li>
</ul>
</li>
<li><a href="note (3381).html">DHCP Server</a></li>
<li class="tree"><a href="note (3382).html">Virtualization</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li><a href="note (3383).html">(1) Install KVM</a></li>
<li><a href="note (3384).html">(2) Create Virtual Machine #1</a></li>
<li><a href="note (3385).html">(3) Create Virtual Machine #2</a></li>
<li><a href="note (3386).html">(4) Operation</a></li>
<li><a href="note (3387).html">(5) Virt Tools</a></li>
<li><a href="note (3388).html">(6) Configure SPICE Server</a></li>
<li style="border-bottom: 0px"><a href="note (3389).html">(7) Configure SPICE Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (3390).html">Cloud Compute</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li><a href="note (3391).html">( 1 ) About OpenStack Havana</a></li>
<li><a href="note (3392).html">( 2 ) Pre-Requirements</a></li>
<li><a href="note (3393).html">( 3 ) Conf Keystone#1</a></li>
<li><a href="note (3394).html">( 4 ) Conf Keystone#2</a></li>
<li><a href="note (3395).html">( 5 ) Conf Glance</a></li>
<li><a href="note (3396).html">( 6 ) Conf Nova</a></li>
<li><a href="note (3397).html">( 7 ) Add Virt-image</a></li>
<li><a href="note (3398).html">( 8 ) Run Instance</a></li>
<li style="border-bottom: #696969 0px solid;"><a href="note (3399).html">( 9 ) Set Floating IP</a></li>
</ul>
</li>
<li class="tree"><a href="note (3400).html">Storage Server</a>
<ul>
<li><a href="note (3401).html">(1) Configure iSCSI Target</a></li>
<li style="border-bottom: 0px"><a href="note (3402).html">(2) Configure iSCSI Initiator</a></li>
</ul>
</li>
<li class="tree"><a href="note (3403).html">NFS Server</a>
<ul>
<li><a href="note (3404).html">(1) Configure NFS Server</a></li>
<li style="border-bottom: 0px"><a href="note (3405).html">(2) Configure NFS Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (3406).html">NIS Server</a>
<ul>
<li><a href="note (3407).html">(1) Configure NIS Server</a></li>
<li style="border-bottom: 0px"><a href="note (3408).html">(2) Configure NIS Client</a></li>
</ul>
</li>
<li class="tree"><a href="note (3409).html">LDAP Server</a>
<ul>
<li><a href="note (3410).html">(1) Configure FreeIPA Server</a></li>
<li><a href="note (3411).html">(2) Configure FreeIPA Client</a></li>
<li style="border-bottom: 0px"><a href="note (3412).html">(3) Basic Operation</a></li>
</ul>
</li>
<li class="tree"><a href="note (3413).html">WEB Server</a>
<ul style="position: absolute; margin-top: -7.4em;">
<li><a href="note (3414).html">( 1 ) Install/Configure httpd</a></li>
<li><a href="note (3415).html">( 2 ) Enable Perl/CGI</a></li>
<li><a href="note (3416).html">( 3 ) Enable PHP</a></li>
<li><a href="note (3417).html">( 4 ) Enable Ruby</a></li>
<li><a href="note (3418).html">( 5 ) Enable Userdir</a></li>
<li><a href="note (3419).html">( 6 ) Configure SSL</a></li>
<li><a href="note (3420).html">( 7 ) Virtual Hostings</a></li>
<li><a href="note (3421).html">( 8 ) Configure WebDAV</a></li>
<li><a href="note (3422).html">( 9 ) Basic Auth + PAM</a></li>
<li><a href="note (3423).html">(10) FreeIPA Authentication</a></li>
<li><a href="note (3424).html">(11) Log Analyzer - AWstats</a></li>
<li><a href="note (3425).html">(12) WebMail - SquirrelMail</a></li>
<li style="border-bottom: 0px"><a href="note (3426).html">(13) WebMail - RoundCubeMail</a></li>
</ul>
</li>
<li class="tree"><a href="note (3427).html">Database</a>
<ul style="position: absolute; margin-top: -1.9em;">
<li style="background: #dcdcdc; border-bottom: #696969 1px solid;"><a href="note (3427).html">&nbsp; MariaDB</a></li>
<li><a href="note (3428).html">(1) Install MariaDB</a></li>
<li style="border-bottom: #696969 1px solid;"><a href="note (3429).html">(2) Install phpMyAdmin</a></li>
<li style="background: #dcdcdc; border-bottom: #696969 1px solid;"><a href="note (3430).html">&nbsp; MySQL</a></li>
<li><a href="note (3431).html">(1) Install MySQL</a></li>
<li style="border-bottom: 0px"><a href="note (3432).html">(2) phpmyadmin</a></li>
</ul>
</li>
<li class="tree"><a href="note (3433).html">FTP Server</a>
<ul>
<li><a href="note (3433).html">(1) Install Vsftpd</a></li>
<li><a href="note (3434).html">(2) Install ProFTPD</a></li>
<li><a href="note (3435).html">(3) Install Pure-FTPd</a></li>
<li><a href="note (3436).html">(4) FTP Client - FileZilla</a></li>
<li><a href="note (3437).html">(5) Vsftpd over TLS/SSL</a></li>
<li><a href="note (3438).html">(6) ProFTPD over TLS/SSL</a></li>
<li style="border-bottom: 0px"><a href="note (3439).html">(6) Pure-FTPd over TLS/SSL</a></li>
</ul>
</li>
<li class="tree"><a href="note (3440).html">MAIL Server</a>
<ul style="position: absolute; margin-top: -7.4em;">
<li><a href="note (3441).html">(1) Install/Configure Postfix</a></li>
<li><a href="note (3442).html">(2) Install/Configure Dovecot</a></li>
<li><a href="note (3443).html">(3) Configure Client</a></li>
<li><a href="note (3444).html">(4) Configure SSL</a></li>
<li><a href="note (3445).html">(5) Virtual Domains</a></li>
<li><a href="note (3446).html">(6) Run with Clamav - ClamSMTP</a></li>
<li><a href="note (3447).html">(7) Log Analyzer - pflogsumm</a></li>
<li><a href="note (3448).html">(8) Log Analyzer - MailGraph</a></li>
<li style="border-bottom: 0px"><a href="note (3449).html">(9) Log Analyzer - AWstats</a></li>
</ul>
</li>
<li class="tree"><a href="note (3450).html">Samba Server</a>
<ul>
<li><a href="note (3451).html">(1) Create fully accessed Directory</a></li>
<li style="border-bottom: 0px"><a href="note (3452).html">(2) Create Limited Directory</a></li>
</ul>
</li>
<li class="tree"><a href="note (3453).html">Proxy Server</a>
<ul>
<li><a href="note (3454).html">(1) Install Squid</a></li>
<li><a href="note (3455).html">(2) Run with Clamav - SquidClamav</a></li>
<li style="border-bottom: 0px"><a href="note (3456).html">(3) Run with SquidGuard</a></li>
</ul>
</li>
<li class="tree"><a href="note (3457).html">Desktop Env</a>
<ul style="position: absolute; margin-top: -5.55em;">
<li><a href="note (3458).html">(5) Configure VNC Server</a></li>
<li><a href="note (3459).html">(4) MATE Desktop Environment</a></li>
<li><a href="note (3460).html">(3) Cinnamon Desktop Environment</a></li>
<li><a href="note (3461).html">(2) KDE Desktop Environment</a></li>
<li style="border-bottom: 0px"><a href="note (3462).html">(1) GNOME Desktop Environment</a></li>
</ul>
</li>
<li id="other"><a href="note (3463).html">Others</a>
<ul style="position: absolute; margin-top: -11.0em;">
<li><a href="note (3464).html">Add Hard Drive</a></li>
<li><a href="note (3465).html">Change RunLevel</a></li>
<li><a href="note (3466).html">Set Timezone</a></li>
<li><a href="note (3467).html">Set Keymap</a></li>
<li><a href="note (3468).html">Set System Language</a></li>
<li><a href="note (3469).html">Set Hostname</a></li>
<li><a href="note (3470).html">Create SSL Certificates</a></li>
<li style="border-bottom: 0px"><a href="note (3463).html">Clamav Anti-Virus</a></li>
</ul>
</li>
</ul>
</div>
<div style="display: inline-block; width: 100%; font-size: 12px; text-align: center; background-color: #dcdcdc; border-bottom: 1px solid #696969; border-top: 2px solid #dcdcdc;">Sponsored Link</div>
<div id="bann">
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "6315121180";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
<div id="contents">
<br>
<table style="width: 96%; line-height: 1.5; margin-top: 5px; margin-bottom: 10px; margin-left: auto; margin-right: auto;" summary="subject">
<tr>
<td style="width: 100%; height: 28px; color: #ff3399; padding-left: 50px; background: url(./img/icon.gif) #ffffff no-repeat 0 0;">
<div class="subject">Configure IPA Server<div class="date">2013/12/27</div></div>
</td>
</tr>
</table>
<table class="base" summary="1">
<tr>
<td class="num">&nbsp;</td>
<td>
<div class="block">
Configure IPA Server in order to share users' accounts in your local networks. 
DNS settings must be configured before it. 
</div>
</td>
</tr>
<tr>
<td class="num">[1]</td>
<td>Install FreeIPA
</td>
</tr>
</table>
<table class="term" summary="1-1">
<tr>
<td>
<div class="block">
[root@dlp ~]# <div class="color1"><a href="command\html\vi.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">vi</a> /etc/hosts </div></div>
<div class="block">
<div class="color2"># add own IP address and hostname</div><br>
<div class="color1">10.0.0.30  dlp.srv.world dlp</div>
</div>
<div class="block">
[root@dlp ~]# <div class="color1"><a href="command\html\yum.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">yum</a> -y install freeipa-server </div></div>
[root@dlp ~]# <div class="color1">ipa-server-install </div><div class="posl-1"><div class="color2"># setup</div></div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">

The log file for this installation can be found in /var/log/ipaserver-install.log
==============================================================================
This program will set up the FreeIPA Server.

This includes:
  * Configure a stand-alone CA (dogtag) for certificate management
  * Configure the Network Time Daemon (ntpd)
  * Create and configure an instance of Directory Server
  * Create and configure a Kerberos Key Distribution Center (KDC)
  * Configure Apache (httpd)

To accept the default shown in brackets, press the Enter key.

</pre>
Do you want to configure integrated DNS (BIND)? [no]: &nbsp; <div class="color2"># if you'd like to setup new DNS, answer "yes"</div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
Enter the fully qualified domain name of the computer
on which you're setting up server software. Using the form
&lt;hostname&gt;.&lt;domainname&gt;
Example: master.example.com.

</pre>
Server host name [dlp.srv.world]:<div class="posl-1"><div class="color2"># Enter if hostname is OK</div></div><br>
<div class="block">
The domain name has been calculated based on the host name.
</div>
<div class="block">
Please confirm the domain name [srv.world]:<div class="posl-1"><div class="color2"># Enter if domainname is OK</div></div><br>
</div>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
The kerberos protocol requires a Realm name to be defined.
This is typically the domain name converted to uppercase.

</pre>
Please provide a realm name [SRV.WORLD]:<div class="posl-1"><div class="color2"># Enter if realm is OK</div></div><br>
<div class="block">
Certain directory server operations require an administrative user.
This user is referred to as the Directory Manager and has full access
to the Directory for system management tasks and will be added to the
instance of directory server created for IPA.
The password must be at least 8 characters long.
</div>
<div class="block">
Directory Manager password:<div class="posl-1"><div class="color2"># set Directory Manager's password</div></div><br>
Password (confirm):<div class="posl-1"><div class="color2"># confirm</div></div><br>
</div>
<div class="block">
The IPA server requires an administrative user, named 'admin'.
This user is a regular system account used for IPA server administration.
</div>
<div class="block">
IPA admin password:<div class="posl-1"><div class="color2"># set IPA admin's password</div></div><br>
Password (confirm):<div class="posl-1"><div class="color2"># confirm</div></div><br>
</div>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
The IPA Master Server will be configured with:
Hostname:      dlp.srv.world
IP address:    10.0.0.30
Domain name:   srv.world
Realm name:    SRV.WORLD

</pre>
Continue to configure the system with these values? [no]: <div class="color1">yes</div> &nbsp; <div class="color2"># Yes</div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">

   ***
   ***

Be sure to back up the CA certificate stored in /root/cacert.p12
This file is required to create replicas. The password for this
file is the Directory Manager password
</pre>
</td>
</tr>
</table>
<table class="base" summary="2">
<tr>
<td class="num">[2]</td>
<td>Get Kerberos ticket and change default shell to bash. Furthermore, restore NTP settings because it was changed. 
</td>
</tr>
</table>
<table class="term" summary="2-1">
<tr>
<td>
[root@dlp ~]# <div class="color1">kinit admin </div><br>
Password for admin@SRV.WORLD:<div class="posl-1"><div class="color2"># IPA admin password</div></div><br>
[root@dlp ~]# <div class="color1">klist </div><div class="posl-1"><div class="color2"># show status</div></div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
Ticket cache: FILE:/tmp/krb5cc_0
Default principal: admin@SRV.WORLD

Valid starting       Expires              Service principal
12/26/2013 19:24:40  12/27/2013 17:24:36  krbtgt/SRV.WORLD@SRV.WORLD
</pre>
[root@dlp ~]# <div class="color1">ipa config-mod --defaultshell=/bin/bash </div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
  Maximum username length: 32
  Home directory base: /home
  Default shell: /bin/bash
  Default users group: ipausers
  Default e-mail domain: srv.world
  Search time limit: 2
  Search size limit: 100
  User search fields: uid,givenname,sn,telephonenumber,ou,title
  Group search fields: cn,description
  Enable migration mode: FALSE
  Certificate Subject base: O=SRV.WORLD
  Password Expiration Notification (days): 4
  Password plugin features: AllowNThash
  SELinux user map order: guest_u:s0$xguest_u:s0$user_u:s0$staff_u:s0-s0:c0.c1023$unconfined_u:s0-s0:c0.c1023
  Default SELinux user: unconfined_u:s0-s0:c0.c1023
  Default PAC types: MS-PAC, nfs:NONE

</pre>
<div class="block">
[root@dlp ~]# <div class="color1"><a href="command\html\vi.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">vi</a> /etc/ntp.conf </div></div>
<div class="block">
<div class="color2"># change servers</div><br>
<div class="color1">#</div>server 0.rhel.pool.ntp.org<br>
<div class="color1">#</div>server 1.rhel.pool.ntp.org<br>
<div class="color1">#</div>server 2.rhel.pool.ntp.org<br>
<div class="color1">#</div>server 127.127.1.0<br>
<div class="color1">#</div>fudge 127.127.1.0 stratum 10<br>
<div class="color1">
server ntp1.jst.mfeed.ad.jp<br>
server ntp2.jst.mfeed.ad.jp<br>
server ntp3.jst.mfeed.ad.jp </div>
</div>
[root@dlp ~]# <div class="color1"><a href="command\html\systemctl.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">systemctl</a> restart ntpd </div><br>
</td>
</tr>
</table>
<table class="base" summary="3">
<tr>
<td class="num">[3]</td>
<td>Add IPA user ( the password set on here is required to change at first-time login ) 
</td>
</tr>
</table>
<table class="term" summary="3-1">
<tr>
<td>
[root@dlp ~]# <div class="color1">ipa user-add fedora --first=Heisenbug --last=Fedora20 --password </div><br>
Password:<div class="posl-1"><div class="color2"># set password</div></div><br>
Enter Password again to verify:<br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
-------------------
Added user "fedora"
-------------------
  User login: fedora
  First name: Heisenbug
  Last name: Fedora20
  Full name: Heisenbug Fedora20
  Display name: Heisenbug Fedora20
  Initials: HF
  Home directory: /home/fedora
  GECOS: Heisenbug Fedora20
  Login shell: /bin/bash
  Kerberos principal: fedora@SRV.WORLD
  Email address: fedora@srv.world
  UID: 1897600003
  GID: 1897600003
  Password: True
  Member of groups: ipausers
  Kerberos keys available: True

</pre>
[root@dlp ~]# <div class="color1">ipa user-find fedora </div><div class="posl-1"><div class="color2"># show status</div></div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
--------------
1 user matched
--------------
  User login: fedora
  First name: Heisenbug
  Last name: Fedora20
  Home directory: /home/fedora
  Login shell: /bin/bash
  Email address: fedora@srv.world
  UID: 1897600003
  GID: 1897600003
  Account disabled: False
  Password: True
  Kerberos keys available: True
----------------------------
Number of entries returned 1
----------------------------
</pre>
</td>
</tr>
</table>
<table class="base" summary="4">
<tr>
<td class="num">[4]</td>
<td>Add Existing local Users to IPA Directory ( set same password with the username on here ) 
</td>
</tr>
</table>
<table class="term" summary="4-1">
<tr>
<td>
<div class="block">
[root@dlp ~]# <div class="color1"><a href="command\html\vi.html" onclick="return hs.htmlExpand(this, { objectType: 'iframe' } )" onkeypress="">vi</a> ipauser.sh </div></div>
<div class="color2">
# extract local users who have 1000-1999 digit UID<br>
# this is an example</div><br>
<div class="color1"><div class="block">
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
#!/bin/bash

for line in `grep "x:1[0-9][0-9][0-9]:" /etc/passwd`
do
   USER=`echo $line | cut -d: -f1`
   FIRST=`echo $line | cut -d: -f5 | awk {'print $1'}`
   LAST=`echo $line | cut -d: -f5 | awk {'print $2'}`
   if [ ! "$FIRST" ]
   then
      FIRST=$USER
   fi
   if [ ! "$LAST" ]
   then
      LAST=$USER
   fi
   echo $USER | ipa user-add $USER --first=$FIRST --last=$LAST --password
done
</pre>
</div></div>
[root@dlp ~]# <div class="color1">sh ipauser.sh </div><br>
<pre style="font-family: Consolas, Courier, Monaco, monospace;">
-------------------
Added user "debian"
-------------------
  User login: debian
  First name: debian
  Last name: debian
  Full name: debian debian
  Display name: debian debian
  Initials: dd
  Home directory: /home/debian
  GECOS: debian debian
  Login shell: /bin/bash
  Kerberos principal: debian@SRV.WORLD
  Email address: debian@srv.world
  UID: 1897600004
  GID: 1897600004
  Password: True
  Member of groups: ipausers
  Kerberos keys available: True
-------------------
Added user "ubuntu"
-------------------
  User login: ubuntu
  First name: ubuntu
  Last name: ubuntu
  Full name: ubuntu ubuntu
  Display name: ubuntu ubuntu
  Initials: uu
  Home directory: /home/ubuntu
  GECOS: ubuntu ubuntu
  Login shell: /bin/bash
  Kerberos principal: ubuntu@SRV.WORLD
  Email address: ubuntu@srv.world
  UID: 1897600005
  GID: 1897600005
  Password: True
  Member of groups: ipausers
  Kerberos keys available: True
-----------------
Added user "cent"
-----------------
  User login: cent
  First name: cent
  Last name: cent
  Full name: cent cent
  Display name: cent cent
  Initials: cc
  Home directory: /home/cent
  GECOS: cent cent
  Login shell: /bin/bash
  Kerberos principal: cent@SRV.WORLD
  Email address: cent@srv.world
  UID: 1897600006
  GID: 1897600006
  Password: True
  Member of groups: ipausers
  Kerberos keys available: True
</pre>
</td>
</tr>
</table>
<div style="width: 100%; border-top: 1px #696969 solid; padding-top: 20px; padding-bottom: 20px;">
<div style="width: 728px; height: 90px; margin-left: auto; margin-right: auto;">
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "3679227322";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
</div>
<div id="right">
<div class="os">FreeIPA Server</div>
<div class="navi2">
<ul>
<li><a href="note (3410).html">IPA Server</a></li>
<li><a href="note (3411).html">IPA Client</a></li>
<li><a href="note (3412).html">Basic Operation</a></li>
</ul>
</div>
<div style="width: 160px; text-align: center;">
<div style="display: inline-block; width: 100%; font-size: 12px; text-align: center; background-color: #dcdcdc; border-bottom: 1px solid #696969; border-top: 2px solid #dcdcdc;">Sponsored Link</div>
<script type="text/javascript">
    google_ad_client = "ca-pub-6423793798099903";
    google_ad_slot = "6315121180";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>
<div id="footer">Copyright &copy; 2007-2018 Server World All Rights Reserved.
<script type="text/javascript" src="bin\count.js"></script>
<img src="../bin/count/count.cgi?1" width="1" height="1" alt="">
</div>
<div id="fb-root">&nbsp;</div>
<script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="toolbar0">
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plusone size="Medium"></g:plusone>
</div>
<div id="toolbar1">
<fb:like href="note (3471).html" send="true" layout="button_count" width="450" show_faces="true"></fb:like>
</div>
<div id="toolbar2">
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11962766-1");
pageTracker._trackPageview();
} catch(err) {}
</script>
</body>
</html>
